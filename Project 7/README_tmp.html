<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="udemy-project-7">Udemy Project 7</h1>
<ul>
<li><a href="#udemy-project-7">Udemy Project 7</a>
<ul>
<li><a href="#github-repo">GitHub repo</a></li>
<li><a href="#introduction-to-the-problem">Introduction to the problem</a></li>
<li><a href="#diagram-showing-my-automation-workflow">Diagram showing my automation workflow</a></li>
</ul>
</li>
<li><a href="#detailed-steps">Detailed steps</a>
<ul>
<li><a href="#initial-vm-creation">Initial VM creation</a></li>
<li><a href="#1a-developing-and-implementing-a-bash-script-to-provision-the-database-vm">1a. Developing and implementing a Bash script to provision the database VM</a>
<ul>
<li><a href="#what-i-learnt">What I learnt</a></li>
</ul>
</li>
<li><a href="#1b-developing-and-implementing-a-bash-script-to-provision-the-app-vm">1b. Developing and implementing a Bash script to provision the app VM</a>
<ul>
<li><a href="#what-i-learnt-1">What I learnt</a></li>
</ul>
</li>
<li><a href="#2-creating-and-testing-images-to-run-the-app-and-database">2. Creating and testing images to run the app and database</a>
<ul>
<li><a href="#what-i-learnt-2">What I learnt</a></li>
</ul>
</li>
<li><a href="#optional-3-following-the-same-steps-for-azure-using-terraform">(Optional) 3. Following the same steps for Azure using Terraform</a>
<ul>
<li><a href="#what-i-learnt-3">What I learnt</a></li>
</ul>
</li>
<li><a href="#blockers">Blockers</a></li>
<li><a href="#benefits-i-personally-saw-from-the-project">Benefits I personally saw from the project</a></li>
</ul>
</li>
</ul>
<h2 id="github-repo">GitHub repo</h2>
<p><a href="https://github.com/farahc123/tech501-bench-udemy-pathways/tree/main/Project%207"><strong>Available here</strong></a></p>
<h2 id="introduction-to-the-problem">Introduction to the problem</h2>
<ul>
<li>We have a test app that uses Node JS v20</li>
<li>This has a front page and a <em>/posts</em> page that we need to get up and running</li>
<li>We will be using a 2-tier app such that the app is on one VM/EC2 instance, and MongoDB (our database server) is on the other</li>
<li>The <strong>goal of this project</strong> is to automate the deployment of this 2-tier app using a <strong>script file</strong> for each VM/EC2 that provisions it with all the required dependencies without needing user input at any stage or manual configuration
<ul>
<li>this needs to be idempotent i.e. work via the <strong>User Data</strong> option when creating the VMs/EC2s, and then it needs to run successfully as a script file again on these VMs/EC2s</li>
</ul>
</li>
<li>To further automate this setup, I also then want to <strong>create images</strong> of the two VMs/EC2s that have been provisioned by the scripts
<ul>
<li>After this stage, I will use one smaller <strong><em>run-app-only.sh</em> script</strong> on the app VM/EC2 created from this image to get the app running -- again, this needs to be idempotent, so it should work when run as <strong>User Data</strong> when creating an app VM/EC2 from the previous image, as well as successfully run again multiple times on this VM/EC2</li>
</ul>
</li>
</ul>
<h2 id="diagram-showing-my-automation-workflow">Diagram showing my automation workflow</h2>
<p><img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/udemy-sparta-project-7-diagram2.drawio.png" alt="alt text"></p>
<h1 id="detailed-steps">Detailed steps</h1>
<h2 id="initial-vm-creation">Initial VM creation</h2>
<ul>
<li>I used the following settings on AWS:
<ul>
<li><strong>For DB VM</strong>:
<ul>
<li><strong>VPC</strong>: default, and default subnet</li>
<li><strong>AMI</strong>: Ubuntu 22.04 LTS (HVM), SSD volume type</li>
</ul>
</li>
<li><strong>Instance type</strong>: t3.micro</li>
<li><strong>Key pair</strong>: my AWS key</li>
<li><strong>Network</strong>: default VPC</li>
<li><strong>Security rules</strong>:
<ul>
<li>allowed SSH (this is done <strong>by default</strong>)</li>
<li><strong>added a new rule</strong> to allow traffic on port 27017 (for mongoDB) from all sources
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-4.png" alt="alt text"></li>
</ul>
</li>
<li><strong>For app VM</strong>:
<ul>
<li><strong>VPC</strong>: default, and default subnet</li>
<li><strong>AMI</strong>: Ubuntu 22.04 LTS (HVM), SSD volume type</li>
<li><strong>Instance type</strong>: t3.micro</li>
<li><strong>Key pair</strong>: my AWS key</li>
<li><strong>Network</strong>: default VPC</li>
<li><strong>Security rules</strong>:</li>
<li>allowed SSH (this is done <strong>by default</strong>)
<ul>
<li><strong>added new rules</strong> to allow inbound HTTP access (i.e. port 80) and inbound access on port 3000 (for reverse proxy)
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-1.png" alt="alt text"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1a-developing-and-implementing-a-bash-script-to-provision-the-database-vm">1a. Developing and implementing a Bash script to provision the database VM</h2>
<p><strong>1.</strong> I created <a href="prov-db.sh">a script file</a> to provision the database EC2 via the <strong>User Data field</strong> on AWS's GUI that did not need user input</p>
<ul>
<li>To avoid the need for any manual configuration, I used the Bash <code>sed</code> command to change MongoDB's BindIP setting to 0.0.0.0:</li>
</ul>
<p><code>sudo sed -i 's/bindIp: 127.0.0.1/bindIp: 0.0.0.0/' /etc/mongod.conf</code></p>
<ul>
<li>I later added some commands to the top of this script file that created a log file that would store a log of when each command was being run:</li>
</ul>
<pre class="hljs"><code><div>#!/bin/bash

# Define log file
LOG_FILE=&quot;/farah_custom_data.log&quot;

# Redirect stdout and stderr to the log file
exec &gt; &gt;(sudo tee -a &quot;$LOG_FILE&quot;) 2&gt;&amp;1
</div></code></pre>
<p><strong>2.</strong> After launching the instance, I waited 5 minutes before logging into it (note that, at this stage, I had provided a public IP to the database EC2/VM just so I could log in to troubleshoot, but I later removed it to increase security)</p>
<p><strong>3.</strong> I then tested that the script had worked with <code>sudo systemctl status mongod</code>:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image.png" alt="alt text">
<strong>4.</strong> I then tested the idempotency of my script by running it again</p>
<ul>
<li>as the &quot;downgraded&quot; message shows, the script ran the <code>upgrade</code> command (which upgraded MongoDB) and then downgraded it to the version specified in my command
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-6.png" alt="alt text"></li>
<li>and this shows that MongoDB was restarted afterwards
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-7.png" alt="alt text"></li>
</ul>
<h3 id="what-i-learnt">What I learnt</h3>
<ul>
<li>the <code>sed</code> command syntax for replacing a string in a given file is:
<code>sudo sed -i 's/&lt;string to remove&gt;/&lt;string to add in its place&gt;' &lt;file path to do this in&gt;</code>
<ul>
<li>the <code>-i</code> flag tells the <code>sed</code> command to write the results of the command to a file, not just to output it to the terminal</li>
</ul>
</li>
</ul>
<hr>
<h2 id="1b-developing-and-implementing-a-bash-script-to-provision-the-app-vm">1b. Developing and implementing a Bash script to provision the app VM</h2>
<ol>
<li>I created <a href="prov-app.sh">a script file</a> that did not need user input and contains the private IP of the above created DB EC2 in the connection string (noting that this would need to change for future iterations of the DB EC2, as the private IP will be different)</li>
</ol>
<ul>
<li>To avoid the need for any manual configuration, I used the Bash <code>sed</code> command again to configure a reverse proxy via Nginx:</li>
</ul>
<p><code>sudo sed -i 's|try_files $uri $uri/ =404;|proxy_pass http://localhost:3000;|' /etc/nginx/sites-available/default</code></p>
<ul>
<li>I later added some commands to the top of this script file that created a log file that would store a log of when each command was being run:</li>
</ul>
<pre class="hljs"><code><div>#!/bin/bash

# Define log file
LOG_FILE=&quot;/farah_custom_data.log&quot;

# Redirect stdout and stderr to the log file
exec &gt; &gt;(sudo tee -a &quot;$LOG_FILE&quot;) 2&gt;&amp;1
</div></code></pre>
<p><strong>2.</strong> After launching the instance, I tested that the script had worked by navigating to the public IP of this app EC2:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-2.png" alt="alt text"></p>
<ul>
<li>and its <em>/posts</em> page:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-3.png" alt="alt text"></li>
</ul>
<p><strong>3.</strong> I then tested the idempotency of my script by running it twice when the app was already running
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-5.png" alt="alt text"></p>
<ul>
<li>and it started the app again (note the different records, indicating that the <code>node seeds/seed.js</code> command had run successfully)
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-9.png" alt="alt text"></li>
</ul>
<h3 id="what-i-learnt">What I learnt</h3>
<ul>
<li>in my <code>sed</code> command to configure the reverse proxy, I needed to switch to using | as the command delimiter because the / in the string confused it as it is also used as the standard delimiter:
<code>sudo sed -i 's|try_files $uri $uri/ =404;|proxy_pass http://localhost:3000;|' /etc/nginx/sites-available/default</code></li>
<li>I needed to change ownership of the newly git-cloned repo folder because otherwise it wouldn't let me run <code>npm install</code> without <code>sudo</code>
<ul>
<li>However I retained the <code>sudo</code> in my commands just to be safe</li>
</ul>
</li>
<li>I needed to add an <code>npm audit fix</code> command to my script to remove some errors that I couldn't get past otherwise</li>
<li>I needed to add a <code>node seeds/seed.js</code> command to my script in case my <em>/posts</em> page hadn't been seeded properly</li>
</ul>
<hr>
<h2 id="2-creating-and-testing-images-to-run-the-app-and-database">2. Creating and testing images to run the app and database</h2>
<p><strong>1.</strong> I created images from both of the above provisioned EC2s:</p>
<ol>
<li><strong>DB EC2 image name</strong>: <em>tech501-farah-udemy-db-from-script</em>
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-10.png" alt="alt text">
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-11.png" alt="alt text"></li>
<li><strong>App EC2 image name</strong>: <em>tech501-farah-udemy-app-from-script</em>
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-8.png" alt="alt text">
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-14.png" alt="alt text"></li>
</ol>
<p><strong>2.</strong> I then used the <strong>Launch instance from AMI</strong> feature to create EC2s from both of these images, using the same settings I initially created (apart from the AMI, as this is now different)</p>
<ul>
<li>I didn't use scripts in the <strong>User data field</strong>, except a <em>run-app-only.sh</em> script <a href="run-app-only.sh">found here</a> used when creating the app EC2 (this overwrites the old connection string and starts the app on this machine when it runs for the first time)</li>
</ul>
<p><strong>3.</strong> I then followed this process again, and on this second run, tested that the <em>/posts</em> page worked and it did <img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-22.png" alt="alt text">
<strong>4.</strong> I then logged out of this second app EC2, logged back in, created a local version of the <em>run-app-only.sh</em> script, ran it, and it worked perfectly (note the new records to indicate the reseeding of the database)
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-23.png" alt="alt text">
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-22.png" alt="alt text"></p>
<h3 id="what-i-learnt">What I learnt</h3>
<ul>
<li>That if I added a <code>node seeds/seed.js</code> command into my <em>run-app-only.sh</em> script (as well as the prov-app.sh script), I could be sure that the script was running successfully because the records on the <em>/posts</em> page would be different — this helped me ensure the scripts really were running successfully, and not just being stored in my browser's cache</li>
<li>Only the public IP changes on reboot on AWS (unless we have an elastic IP)
<ul>
<li>i.e. The private IP of an EC2 instance doesn't change after it has been restarted so my <em>run-app-only.sh</em> script can be used repeatedly without modifying it so long as I am working with the same DB EC2 (i.e. I haven't created another one)</li>
</ul>
</li>
<li>I modified my <em>run-app-only.sh</em> script so that, before the <code>pm2 start app.js</code> line, it ran <code>pm2 delete app.js</code> to remove the app from pm2's process list, which seemed to be causing errors when rerunning the script — this is to ensure the script is idempotent</li>
</ul>
<hr>
<h2 id="optional-3-following-the-same-steps-for-azure-using-terraform">(Optional) 3. Following the same steps for Azure using Terraform</h2>
<p><strong>1.</strong> After I successfully completed the above parts using AWS and its GUI, I wanted to redo the task on Azure using Terraform to set up the 2-subnet VN and the two VMs</p>
<ul>
<li>The <em>.tf</em> files used for this part can be found <a href="Using%20Terraform">here</a> (with sensitive information hidden in a git-ignored variable file)</li>
</ul>
<p><strong>2.</strong> VN created using this method:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-27.png" alt="alt text">
<strong>3.</strong> VMs created using this method:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-26.png" alt="alt text"></p>
<ul>
<li>Successful posts page using this method:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-25.png" alt="alt text"></li>
</ul>
<p><strong>4.</strong> I then created images of both the above VMs e.g.:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-28.png" alt="alt text">
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-29.png" alt="alt text">
<strong>5.</strong> Using Terraform, I then created VMs from both of these images (with an added <em>run-app-only.sh</em> script provided as <strong>custom data</strong> for the app VM):
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-30.png" alt="alt text">
<strong>6.</strong> Finally, I tested these VMs from images by accessing the posts page:
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-31.png" alt="alt text"></p>
<h3 id="what-i-learnt">What I learnt</h3>
<ul>
<li>That in Terraform, Azure uses names, not IDs, for its images</li>
</ul>
<hr>
<h2 id="blockers">Blockers</h2>
<ul>
<li>When logging into any of the EC2s created from my images, I needed to specify that I wanted to login as the <code>ubuntu</code> user like this:
<code>ssh -i &quot;tech501-farah-aws-key.pem&quot; ubuntu@ec2</code>...
<ul>
<li>Otherwise I got this error
<img src="file:///c:/Users/farah/OneDrive - Sparta Global/Documents/Github/tech501-bench-udemy-pathways/Project 7/image-13.png" alt="alt text"></li>
</ul>
</li>
<li>I did run into a couple of errors getting the <em>/posts</em> page to load, which was because I hadn't modified the private IP in the connection string when running the <code>export</code> command, so this was easily fixed</li>
<li>In the early stages of the project, there were a couple of occasions when I was unsure if my User Data scripts were running successfully, so I modified my script files so that before a command was executed, it provided output to a log file — this way I could tell if the script was running successfully or not</li>
</ul>
<h2 id="benefits-i-personally-saw-from-the-project">Benefits I personally saw from the project</h2>
<ul>
<li>The more I automated, the simpler the provisioning and starting of the app got</li>
<li>Because of this, I preferred using Terraform over the cloud providers' GUIs, as I could easily build and tear down any resources with a few uses of my keyboard rather than following a ClickOps approach</li>
<li>I preferred using Azure over AWS in general because, during testing (when I assigned a public IP to the MongoDB VM to enable manual logging in to check), I no longer had to modify the connection string used in the <code>export</code> command on the app VM as this was always the same, even on different iterations of my database VM
<ul>
<li>Because of this, in future, if I was creating something with <strong>an IP address I needed to keep the same</strong> (e.g. a VM for a Jenkins server) and I didn't have access to an Elastic IP on AWS, I would prefer to use Azure — because we discovered that AWS's changing IP address caused Jenkins to work very slowly after a reboot of the EC2 it was running on</li>
</ul>
</li>
</ul>

</body>
</html>
